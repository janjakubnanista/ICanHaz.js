(function(){(function(f,b){"object"===typeof exports&&exports&&"string"!==typeof exports.nodeName?b(exports):"function"===typeof define&&define.amd?define(["exports"],b):(f.Mustache={},b(f.Mustache))})(this,function(f){function b(a){return"function"===typeof a}function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function q(a,d){return null!=a&&"object"===typeof a&&d in a}function h(a,d){function c(a){"string"===typeof a&&(a=a.split(C,2));if(!z(a)||2!==a.length)throw Error("Invalid tags: "+
a);n=new RegExp(e(a[0])+"\\s*");x=new RegExp("\\s*"+e(a[1]));q=new RegExp("\\s*"+e("}"+a[1]))}if(!a)return[];var k=[],y=[],b=[],l=!1,g=!1,n,x,q;c(d||f.tags);for(var p=new u(a),h,m,t,w;!p.eos();){h=p.pos;if(t=p.scanUntil(n)){w=0;for(var v=t.length;w<v;++w)if(m=t.charAt(w),D.call(E,m)?g=!0:b.push(y.length),y.push(["text",m,h,h+1]),h+=1,"\n"===m){if(l&&!g)for(;b.length;)delete y[b.pop()];else b=[];g=l=!1}}if(!p.scan(n))break;l=!0;m=p.scan(F)||"name";p.scan(G);"="===m?(t=p.scanUntil(B),p.scan(B),p.scanUntil(x)):
"{"===m?(t=p.scanUntil(q),p.scan(H),p.scanUntil(x),m="&"):t=p.scanUntil(x);if(!p.scan(x))throw Error("Unclosed tag at "+p.pos);w=[m,t,h,p.pos];y.push(w);if("#"===m||"^"===m)k.push(w);else if("/"===m){m=k.pop();if(!m)throw Error('Unopened section "'+t+'" at '+h);if(m[1]!==t)throw Error('Unclosed section "'+m[1]+'" at '+h);}else"name"===m||"{"===m||"&"===m?g=!0:"="===m&&c(t)}if(m=k.pop())throw Error('Unclosed section "'+m[1]+'" at '+p.pos);return I(r(y))}function r(a){for(var d=[],c,k,b=0,e=a.length;b<
e;++b)if(c=a[b])"text"===c[0]&&k&&"text"===k[0]?(k[1]+=c[1],k[3]=c[3]):(d.push(c),k=c);return d}function I(a){for(var d=[],c=d,k=[],b,e=0,l=a.length;e<l;++e)switch(b=a[e],b[0]){case "#":case "^":c.push(b);k.push(b);c=b[4]=[];break;case "/":c=k.pop();c[5]=b[2];c=0<k.length?k[k.length-1][4]:d;break;default:c.push(b)}return d}function u(a){this.tail=this.string=a;this.pos=0}function v(a,d){this.view=a;this.cache={".":this.view};this.parent=d}function n(){this.cache={}}var J=Object.prototype.toString,
z=Array.isArray||function(a){return"[object Array]"===J.call(a)},D=RegExp.prototype.test,E=/\S/,K={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},G=/\s*/,C=/\s+/,B=/\s*=/,H=/\s*\}/,F=/#|\^|\/|>|\{|&|=|!/;u.prototype.eos=function(){return""===this.tail};u.prototype.scan=function(a){a=this.tail.match(a);if(!a||0!==a.index)return"";a=a[0];this.tail=this.tail.substring(a.length);this.pos+=a.length;return a};u.prototype.scanUntil=function(a){a=this.tail.search(a);
var d;switch(a){case -1:d=this.tail;this.tail="";break;case 0:d="";break;default:d=this.tail.substring(0,a),this.tail=this.tail.substring(a)}this.pos+=d.length;return d};v.prototype.push=function(a){return new v(a,this)};v.prototype.lookup=function(a){var d=this.cache,c;if(d.hasOwnProperty(a))c=d[a];else{for(var k=this,e,f,l=!1;k;){if(0<a.indexOf("."))for(c=k.view,e=a.split("."),f=0;null!=c&&f<e.length;)f===e.length-1&&(l=q(c,e[f])),c=c[e[f++]];else c=k.view[a],l=q(k.view,a);if(l)break;k=k.parent}d[a]=
c}b(c)&&(c=c.call(this.view));return c};n.prototype.clearCache=function(){this.cache={}};n.prototype.parse=function(a,d){var c=this.cache,b=c[a];null==b&&(b=c[a]=h(a,d));return b};n.prototype.render=function(a,d,c){var b=this.parse(a);d=d instanceof v?d:new v(d);return this.renderTokens(b,d,c,a)};n.prototype.renderTokens=function(a,d,c,b){for(var e="",f,l,g,n=0,h=a.length;n<h;++n)g=void 0,f=a[n],l=f[0],"#"===l?g=this.renderSection(f,d,c,b):"^"===l?g=this.renderInverted(f,d,c,b):">"===l?g=this.renderPartial(f,
d,c,b):"&"===l?g=this.unescapedValue(f,d):"name"===l?g=this.escapedValue(f,d):"text"===l&&(g=this.rawValue(f)),void 0!==g&&(e+=g);return e};n.prototype.renderSection=function(a,d,c,e){function f(a){return n.render(a,d,c)}var n=this,l="",g=d.lookup(a[1]);if(g){if(z(g))for(var h=0,r=g.length;h<r;++h)l+=this.renderTokens(a[4],d.push(g[h]),c,e);else if("object"===typeof g||"string"===typeof g||"number"===typeof g)l+=this.renderTokens(a[4],d.push(g),c,e);else if(b(g)){if("string"!==typeof e)throw Error("Cannot use higher-order sections without the original template");
g=g.call(d.view,e.slice(a[3],a[5]),f);null!=g&&(l+=g)}else l+=this.renderTokens(a[4],d,c,e);return l}};n.prototype.renderInverted=function(a,d,c,b){var e=d.lookup(a[1]);if(!e||z(e)&&0===e.length)return this.renderTokens(a[4],d,c,b)};n.prototype.renderPartial=function(a,d,c){if(c&&(a=b(c)?c(a[1]):c[a[1]],null!=a))return this.renderTokens(this.parse(a),d,c,a)};n.prototype.unescapedValue=function(a,d){var c=d.lookup(a[1]);if(null!=c)return c};n.prototype.escapedValue=function(a,d){var c=d.lookup(a[1]);
if(null!=c)return f.escape(c)};n.prototype.rawValue=function(a){return a[1]};f.name="mustache.js";f.version="2.2.1";f.tags=["{{","}}"];var A=new n;f.clearCache=function(){return A.clearCache()};f.parse=function(a,d){return A.parse(a,d)};f.render=function(a,d,c){if("string"!==typeof a)throw d=TypeError,a=z(a)?"array":typeof a,new d('Invalid template! Template should be a "string" but "'+a+'" was given as the first argument for mustache#render(template, view, partials)');return A.render(a,d,c)};f.to_html=
function(a,d,c,e){a=f.render(a,d,c);if(b(e))e(a);else return a};f.escape=function(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return K[a]})};f.Scanner=u;f.Context=v;f.Writer=n});(function(){function f(b){return"".trim?b.trim():b.replace(/^\s+/,"").replace(/\s+$/,"")}var b={VERSION:"0.10.2",templates:{},$:"undefined"!==typeof window?window.jQuery||window.Zepto||null:null,addTemplate:function(e,q){if("object"===typeof e)for(var h in e)this.addTemplate(h,e[h]);else b[e]?console.error("Invalid name: "+
e+"."):b.templates[e]?console.error('Template "'+e+'  " exists'):(b.templates[e]=q,b[e]=function(h,q){h=h||{};var u=Mustache.to_html(b.templates[e],h,b.templates);return b.$&&!q?b.$(f(u)):u})},clearAll:function(){for(var e in b.templates)delete b[e];b.templates={}},refresh:function(){b.clearAll();b.grabTemplates()},grabTemplates:function(){var e,q,h=document.getElementsByTagName("script"),r;e=0;for(q=h.length;e<q;e++)(r=h[e])&&r.innerHTML&&r.id&&("text/html"===r.type||"text/x-icanhaz"===r.type)&&
b.addTemplate(r.id,f(r.innerHTML))}};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports.ich=b):this.ich=b;"undefined"!==typeof document&&(b.$?b.$(function(){b.grabTemplates()}):document.addEventListener("DOMContentLoaded",function(){b.grabTemplates()},!0))})()})();
